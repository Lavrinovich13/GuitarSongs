<div class="mdl-card-wide mdl-card mdl-shadow--2dp center-card">
    <div class="mdl-card__title">
        <h2 class="mdl-card__title-text">New song</h2>
    </div>
    <form name="newSongForm" ng-submit="addSong(baseSong)" novalidate>
        <div class="mdl-card__supporting-text" ng-model="baseSong">
            <div class="mdl-textfield">
                <input class="mdl-textfield__input" type="text" ng-model="baseSong.baseSongName" placeholder="Name..." required>
            </div>
            <div class="mdl-textfield">
                <input class="mdl-textfield__input" list="genreDataList" type="text" ng-model="baseSong.genre.genreName" placeholder="Genre..." required>
                <datalist id="genreDataList">
                    <option ng-repeat="genre in genres">{{genre.genreName}}</option>
                </datalist>
            </div>
            <div class="mdl-textfield">
                <input class="mdl-textfield__input" list="singerDataList" type="text" ng-model="baseSong.singer.singerName" placeholder="Singer..." required>
                <datalist id="singerDataList">
                    <option ng-repeat="singer in singers">{{singer.singerName}}</option>
                </datalist>
            </div>
        </div>
        <div class="mdl-card__actions mdl-card--border videoArea">
            <span class="mdl-card__supporting-text">
                Video
            </span>
        </div>
        <div class="mdl-card__supporting-text">
            <button type="button" 
                    class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab"
                    ng-click="isAddVideoHide=!isAddVideoHide; video = {}">
                <i class="material-icons">add</i>
            </button>
            <div id="videoContainer">
                <div ng-repeat="video in baseSong.video">
                    <iframe width="560" 
                            height="315" 
                            ng-src="{{trustSrc(video.videoUrl)}}" 
                            frameborder="0"></iframe>
                    <button type="button" 
                            class="mdl-button mdl-js-button mdl-button--icon" 
                            ng-click="baseSong.video.splice($index,1)">
                        <i class="material-icons">delete</i>
                    </button>
                </div>
            </div>
        </div>
        <div class="mdl-card__actions mdl-card--border musicArea">
            <span class="mdl-card__supporting-text">
                Music
            </span>
        </div>

        <div class="mdl-card__supporting-text" ng-model="baseSong">
            <button type="button"  
                    class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab" 
                    ng-click="isAddMusicHide=!isAddMusicHide; music={}">
                <i class="material-icons">add</i>
            </button>
            <div ng-repeat="music in baseSong.music">
                <p>{{music.name}}</p>
                <audio controls="controls" ng-src="{{trustSrc(music.musicUrl)}}"></audio>
                <button type="button"  
                        class="mdl-button mdl-js-button mdl-button--icon" 
                        ng-click="baseSong.music.splice($index,1)">
                    <i class="material-icons">delete</i>
                </button>
            </div>
        </div>
        <div class="mdl-card__actions mdl-card--border textArea">
            <span class="mdl-card__supporting-text">
                Text
            </span>
        </div>
        <div class="mdl-card__supporting-text" ng-model="baseSong">
            <button type="button"  
                    class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab" 
                    ng-click="isAddTextHide=!isAddTextHide; text={}">
                <i class="material-icons">add</i>
            </button>
            <div ng-repeat="text in baseSong.text">
                <label>{{text.textName}}</label>
                <button type="button"
                        class="mdl-button mdl-js-button mdl-button--icon"
                        ng-click="editDocument(baseSong.text, $index); isAddTextHide=!isAddTextHide">
                    <i class="material-icons">edit</i>
                </button>
                <button type="button"  
                        class="mdl-button mdl-js-button mdl-button--icon" 
                        ng-click="baseSong.text.splice($index,1)">
                    <i class="material-icons">delete</i>
                </button>
            </div>
        </div>
        <div class="mdl-card__actions mdl-card--border">
            <button type="submit" 
                    class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" 
                    ng-disabled="newSongForm.$invalid">
                Save
            </button>
        </div>
    </form>
</div>

<!--Modal divs-->
<div class="modal-div" ng-hide="isAddVideoHide">
    <div class="mdl-card mdl-shadow--2dp modal-center-card" 
         ng-hide="isAddVideoHide">
        <div class="mdl-card__title">
            <h2 class="mdl-card__title-text">New video</h2>
        </div>
        <form name="videoForm" ng-submit="addNewVideo(baseSong.video, video); isAddVideoHide=!isAddVideoHide">
            <div class="mdl-card__supporting-text">
                <div class="mdl-textfield">
                    <input class="mdl-textfield__input"
                           type="text"
                           ng-model="video.videoUrl"
                           placeholder="Url..." required>
                </div>
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <button type="submit" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                   ng-disabled="videoForm.$invalid">
                    Save
                </button>
                <button type="reset" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                   ng-click="isAddVideoHide=!isAddVideoHide">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>

<div class="modal-div" ng-hide="isAddMusicHide">
    <div class="mdl-card mdl-shadow--2dp modal-center-card" ng-hide="isAddMusicHide">
        <div class="mdl-card__title">
            <h2 class="mdl-card__title-text">New music</h2>
        </div>
        <form name="musicForm" ng-submit="addNewMusic(baseSong.music, music); isAddMusicHide=!isAddMusicHide">
            <div class="mdl-card__supporting-text">
                <div class="mdl-textfield">
                    <input class="mdl-textfield__input"
                           ng-model="music.musicName"
                           type="text"
                           placeholder="Name..." required>
                </div>
            </div>
            <div class="mdl-card__supporting-text">
                <div class="mdl-textfield">
                    <input class="mdl-textfield__input"
                           ng-model="music.musicUrl"
                           placeholder="Url..." required>
                </div>
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <button type="submit" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                        ng-disabled="musicForm.$invalid">
                    Save
                </button>
                <button type="reset" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                   ng-click="isAddMusicHide=!isAddMusicHide">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>

<div class="modal-div" ng-hide="isAddTextHide">
    <div class="mdl-card mdl-shadow--2dp modal-center-card" ng-hide="isAddTextHide">
        <div class="mdl-card__title">
            <h2 class="mdl-card__title-text">New text</h2>
        </div>
        <form name="textForm"
              ng-submit="text.content = getTextFromTextEditor(); addNewText(baseSong.text, text); isAddTextHide=!isAddTextHide">
            <div class="mdl-card__supporting-text">
                <div class="mdl-textfield">
                    <input class="mdl-textfield__input"
                           ng-model="text.textName"
                           type="text"
                           placeholder="Name..." required>
                </div>
            </div>
            <div class="mdl-card__supporting-text">
                <textarea id="texteditor"></textarea>
            </div>
            <div class="mdl-card__actions mdl-card--border">
                <button type="submit" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                        ng-disabled="textForm.$invalid">
                    Save
                </button>
                <button type="reset" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"
                        ng-click="isAddTextHide=!isAddTextHide">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    tinymce.init({
        selector: '#texteditor',
        toolbar: "styleselect | bold italic | accords",
        menubar: false,
        setup: function (editor) {
            editor.addButton('accords', {
                type: 'listbox',
                text: 'Accords',
                icon: false,
                onselect: function (e) {
                    editor.insertContent(this.value());
                },
                values: [
                  { text: 'Am', value: '&nbsp;<strong>Am</strong>' },
                  { text: 'Dm', value: '&nbsp;<strong>Dm</strong>' },
                  { text: 'C', value: '&nbsp;<strong>C</strong>' }
                ]
            });
        }
    });
</script>
